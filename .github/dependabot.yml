version: 2
updates:
  # GitHub Actions workflow updates
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "daily"
    labels:
      - "dependencies"
    assignees:
      - wallstop
    reviewers:
      - wallstop

  # NuGet: SourceGenerator project - Roslyn packages pinned for Unity compiler compatibility
  - package-ecosystem: "nuget"
    directory: "/SourceGenerators/WallstopStudios.DxMessaging.SourceGenerators"
    schedule:
      interval: "daily"
    labels:
      - "dependencies"
    assignees:
      - wallstop
    reviewers:
      - wallstop
    ignore:
      # SourceGenerator Roslyn packages - pinned for Unity compiler compatibility.
      # Unity's embedded compiler requires specific Roslyn versions; updating breaks SourceGenerator loading.
      # See: https://docs.unity3d.com/Manual/roslyn-analyzers.html
      - dependency-name: "Microsoft.CodeAnalysis*"
      - dependency-name: "System.Collections.Immutable"
      - dependency-name: "System.Reflection.Metadata"
      - dependency-name: "System.Runtime.CompilerServices.Unsafe"

  # NuGet: SourceGenerator tests - uses newer Roslyn but ignores shared Roslyn dependencies
  # Tests use newer Roslyn (4.14.0) than production (4.2.0), but ignoring shared Roslyn deps
  # prevents Dependabot churn and keeps dependency versions aligned.
  - package-ecosystem: "nuget"
    directory: "/SourceGenerators/WallstopStudios.DxMessaging.SourceGenerators.Tests"
    schedule:
      interval: "daily"
    labels:
      - "dependencies"
    assignees:
      - wallstop
    reviewers:
      - wallstop
    ignore:
      # Shared Roslyn dependencies (pinned for Unity compatibility in SourceGenerator project)
      - dependency-name: "Microsoft.CodeAnalysis*"
      - dependency-name: "System.Collections.Immutable"
      - dependency-name: "System.Reflection.Metadata"
      - dependency-name: "System.Runtime.CompilerServices.Unsafe"

  # npm/UPM: package.json at repo root (Unity package manifest)
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "daily"
    labels:
      - "dependencies"
    versioning-strategy: increase
    assignees:
      - wallstop
    reviewers:
      - wallstop
